<!DOCTYPE html>
<html lang="en">
<head>
  <title>test - Travel Map</title>
  <meta charset="UTF-8" />
  <title>My temp test</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- SidePanel CSS -->
  <link rel="stylesheet" href="https://maxwell-ilai.github.io/Leaflet.SidePanel/src/leaflet-sidepanel.css" />

  <!-- Fullscreen Plugin CSS -->
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css" />

  <style>
    :root {
      --myyellow: #f2c91c; /* rgb(242, 201, 28); */
      --newyellow:#ffb02e;
    }

    /*html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }*/

    body {
      background-color: yellow; /* Background color */
      display: flex; /* used to say block;*/
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh; /* 100% of the viewport height */
    }
    
    header {
      height: 15%;
      width: 100%; /* Full width */
      background-color: yellow; /* Background color */
      padding: 10px; /* Space inside the header */
      box-sizing: border-box;
      z-index: 1000; /* Ensure it stays above other content */
    }

    

    #map {
      height: 85%;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
    }

    #sidepanel {
      position: absolute;
      color: black;
      top: 0;
      right: 0;
      height: 90%;
      margin: 10px;
      width: 25%;
      z-index: 1001; /* higher than map layers */
      background: yellow;
      border: 3px solid black;
      border-radius: 10pt;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .tab-buttons {
      display: flex;
      justify-content: space-around;
      margin: 10px 0;
      color: green;
    }

    .tab-btn {
      padding: 6px 12px;
      background: #ddd;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: blue;
    }

    .tab-btn:hover {
      background-color: #ccc;
    }

    .tab-btn.active {
      background-color: #bbb;
      font-weight: bold;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .leaflet-touch .leaflet-control-layers, .leaflet-touch .leaflet-bar {
      border: #00000000;
      background-clip: padding-box; /* removes ugly box around the buttons */
    }

    /* Change the popup background color and text color */
    .leaflet-tooltip {
      margin-top: -30px; /* Move tooltip content 30px up */
      background-color:yellow; 
      border-radius: 6px; /* Rounded corners */
      border: 2px solid black;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      text-align: center;  /* Center the content */
      color: black; /* Dark text */
      font-size: 12pt;
      font-weight: bold; /* Bold text */
      font-family: Mochiy Pop One;
    }

  </style>
</head>
<body>
  <header>
    <h1>üêù Testing ... it's a Map üêù</h1>
  </header>
  <!-- Map Container -->
  <div id="map">
    <!-- Side Panel (moved INSIDE map container) -->
    <div id="sidepanel" class="leaflet-sidepanel">
      <button class="sidepanel-toggle-button" style="display: none;"></button>

      <div class="leaflet-sidepanel-header">
        <h1>Side Panel</h1>
        <button id="close-btn" class="leaflet-sidepanel-close">&times;</button>
      </div>

      <div class="tab-buttons">
        <button class="tab-btn active" data-tab="intro">Intro</button>
        <button class="tab-btn" data-tab="legend">Legend</button>
        <button class="tab-btn" data-tab="description">Description</button>
      </div>

      <div class="leaflet-sidepanel-content">
        <div class="tab-content active" id="tab-intro">
          <p>Welcome to the map! This is the introduction section.</p>
        </div>
        <div class="tab-content" id="tab-legend">
          <p><strong>Legend:</strong><br>üü¢ Park<br>üîµ Water<br>üî¥ Danger zone</p>
        </div>
        <div class="tab-content" id="tab-description">
          <p>This map displays points of interest in the selected area. Click on markers to see more.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Fullscreen plugin JS -->
  <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js"></script>

  <!-- SidePanel JS -->
  <script src="https://maxwell-ilai.github.io/Leaflet.SidePanel/src/leaflet-sidepanel.js"></script>

  <script>
    const map = L.map('map').setView([51.505, -0.09], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
    }).addTo(map);

    L.control.fullscreen().addTo(map);

    const panel = L.control.sidepanel('sidepanel', { position: 'right' }).addTo(map);

    map.on('enterFullscreen', function () {
      console.log('Entered fullscreen');
    });

    map.on('exitFullscreen', function () {
      console.log('Exited fullscreen');
    });

    document.getElementById('close-btn').addEventListener('click', () => {
      panel.hide();
    });

    const marker = L.marker([51.5, -0.09]).addTo(map);
    marker.on('click', () => {
      panel.show();
      setActiveTab("description");
    });

    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const selected = btn.getAttribute('data-tab');
        setActiveTab(selected);
      });
    });

    function setActiveTab(tabName) {
      tabContents.forEach(content => {
        content.classList.remove('active');
        if (content.id === `tab-${tabName}`) {
          content.classList.add('active');
        }
      });

      tabButtons.forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-tab') === tabName) {
          btn.classList.add('active');
        }
      });
    }
  </script>
</body>
</html>
